/*! midi.js - v0.0.0 - 2013-05-14 */
(function(){var t,o={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var e in n)o.call(n,e)&&(t[e]=n[e]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Midi.Amplifier=function(o){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,o),i.prototype.defaultOptions={volume:100},i}(Midi.Base)}).call(this),function(){window.Midi={},Midi.Base=function(){function t(t){this.options=_.clone(this.defaultOptions),this.set(t)}return t.prototype.defaultOptions={},t.prototype.set=function(t){return _.merge(this.options,t)},t}()}.call(this),function(){var t,o={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var e in n)o.call(n,e)&&(t[e]=n[e]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Midi.Instrument=function(o){function i(){return t=i.__super__.constructor.apply(this,arguments)}return n(i,o),i.prototype.defaultOptions={soundFont:void 0},i.prototype.playNote=function(){},i}(Midi.Base)}.call(this),function(){var t={}.hasOwnProperty,o=function(o,n){function i(){this.constructor=o}for(var e in n)t.call(n,e)&&(o[e]=n[e]);return i.prototype=n.prototype,o.prototype=new i,o.__super__=n.prototype,o};Midi.Player=function(t){function n(t){var o,i;(o=this.options).amplifier||(o.amplifier=new Midi.Amplifier(_.pick(t,["volume"]))),(i=this.options).instrument||(i.instrument=new Midi.Instrument(_.pick(t,["soundFont"]))),_.extend(t,{volume:void 0,soundFont:void 0}),n.__super__.constructor.call(this,t)}return o(n,t),n.prototype.defaultOptions={tempo:1,currentTime:0,midiFile:void 0,playState:"stopped",instrument:void 0,soundFont:void 0,amplifier:void 0,volume:void 0,callbacks:{onNote:function(){return{}},onPlay:function(){return{}},onPause:function(){return{}},onStop:function(){return{}},onEnd:function(){return{}},onAdvance:function(){return{}}}},n.prototype.set=function(t){return n.__super__.set.call(this,t),t.soundFont?this.options.instrument.set({soundFont:t.soundFont}):t.volume?this.options.amplifier.set({volume:t.volume}):t.tempo?console.log("changed tempo to "+t.tempo):void 0},n.prototype.play=function(){return this.options.callbacks.onPlay()},n.prototype.pause=function(){return this.options.callbacks.onPause()},n.prototype.stop=function(){return this.options.callbacks.onStop()},n.prototype.advance=function(){return this.options.callbacks.onAdvance()},n}(Midi.Base)}.call(this);